import socket

HOST = "127.0.0.1"
PORT = 5000

def show_menu():
    print("\n--- CAT FACT MENU ---")
    print("1. Get a cat fact")
    print("2. Exit")

while True:
    show_menu()
    choice = input("Enter your choice: ").strip()

    try:
        client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        client.connect((HOST, PORT))
        client.sendall(choice.encode())

        # Receive the full message (in case it's longer than 1024 bytes)
        reply = b""
        while True:
            data = client.recv(1024)
            if not data:
                break
            reply += data
        reply = reply.decode()
        print("\nServer says:", reply)

    except ConnectionRefusedError:
        print("\nServer is not running. Run server.py first.")
    except Exception as e:
        print(f"\nClient error: {e}")
    finally:
        try:
            client.close()
        except Exception:
            pass

    if choice == "2":
        break
